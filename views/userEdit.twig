{% extends 'layouts/main.twig' %}
{% block title %}
    {% if user.id and user_is_admin == 1 and not this_new_self_id %}
        редактирование пользователя {{ user.login }}
    {% elseif user_is_admin == 1 and not this_new_self_id %}
        добавление пользователя
    {% elseif user.id  and this_new_self_id %}
        редактирование профиля
    {% else %}
        регистрация
    {% endif %}
{% endblock %}
{% block header %}
    {% if user.id and user_is_admin == 1 and not this_new_self_id %}
        редактирование пользователя {{ user.login }}
    {% elseif user_is_admin == 1 and not this_new_self_id %}
        добавление пользователя
    {% elseif user.id  and this_new_self_id %}
        редактирование профиля
    {% else %}
        регистрация
    {% endif %}
{% endblock %}
{% block content %}

    {% if user.id and user_is_admin == 1 and not this_new_self_id %}
        <h2>редактирование пользователя {{ user.login }}</h2>
    {% elseif user_is_admin == 1 and not this_new_self_id %}
        <h2>добавление пользователя</h2>
    {% elseif user.id  and this_new_self_id %}
        <h2>вы можете редактировать свои данные</h2>
    {% else %}
        <h2>Регистрация</h2>
    {% endif %}

    <br>
    <form method="post" action="/user/update?newSelfId={{ this_new_self_id }}" enctype="multipart/form-data">
        <input type="hidden" id="id" name="id" value="{{ user.id }}">
        {% if user.avatar %}
            <img class="new_img_style" src="/img/{{ user.avatar }}" alt="avatar">
        {% else %}
            <img class="new_img_style" src="/img/no_avatar.png" alt="avatar">
        {% endif %}
        <div>
            <br>
            <input type="file" name="avatar" id="avatar"/>
        </div>
        {% if user.id == false %}
            <input type="hidden" name="avatar" id="avatar" value="no_avatar.png"/>
        {% endif %}
        <br>
        <p>логин</p>
        <input type="text" id="login" name="login" value="{{ user.login }}" placeholder="введите логин">
        <p>пароль</p>
        <input type="text" id="password" name="password" value="" placeholder="введите пароль">
        <input type="hidden" id="avatar" name="avatar" value="{{ user.avatar }}">
        <p>имя</p>
        <input type="text" id="name" name="name" value="{{ user.name }}" placeholder="введите имя">
        <p>должность</p>
        <input type="text" id="position" name="position" value="{{ user.position }}" placeholder="введите должность">
        {% if is_auth and user_is_admin == 1 and user.is_admin != 1 %}
            <p>расширенные права</p>
            <select name="is_admin" id="is_admin">
                <option value="nothing">Значение не выбрано</option>
                <option value="yes">Да</option>
                <option value="no">Нет</option>
            </select>
        {% elseif user.is_admin == 1 %}
            <input type="hidden" name="is_admin" id="is_admin" value="admin">
        {% else %}
            <input type="hidden" name="is_admin" id="is_admin" value="no">
        {% endif %}
        <br>
        <br>
        <input type="submit" name="uploadBtn" value="сохранить" class="post-btn">
    </form>
    <br>

    {% if user.id and not this_new_self_id %}
        <a class="php-other-link php-link"
           style="width: 55px;"
           href="/user/one?id={{ user.id }}">назад</a>
    {% elseif not user.id and this_true_user_id %}
        <a class="php-link php-other-link"
           style="width: 55px"
           href="/user/all">назад</a>
    {% elseif not user.id and not this_true_user_id %}
        <a class="php-link php-other-link"
           style="width: 55px"
           href="/user/auth">назад</a>
    {% elseif this_new_self_id %}
        <a class="php-link php-other-link"
           style="width: 55px"
           href="/user/auth">назад</a>
    {% endif %}

    <hr>

{% endblock %}